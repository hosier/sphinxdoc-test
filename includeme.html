<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Mini High Power Battery Management System Overview &mdash; test 1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="test 1 documentation" href="index.html" />
    <link rel="prev" title="Welcome to test’s documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="index.html" title="Welcome to test’s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">test 1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="mini-high-power-battery-management-system-overview">
<h1>Mini High Power Battery Management System Overview<a class="headerlink" href="#mini-high-power-battery-management-system-overview" title="Permalink to this headline">¶</a></h1>
<p>Here is an overview of what our project is</p>
<img alt="_images/BMSboard.jpg" src="_images/BMSboard.jpg" />
<p>stuff
things
ideas</p>
</div>
<div class="section" id="bms-design">
<h1>BMS Design<a class="headerlink" href="#bms-design" title="Permalink to this headline">¶</a></h1>
<p>The Battery Management System  has two main IC&#8217;s on it. One
is an ATMEGA32u4. The other is a</p>
</div>
<div class="section" id="bms-configuration">
<h1>BMS Configuration<a class="headerlink" href="#bms-configuration" title="Permalink to this headline">¶</a></h1>
<p>Here we talk about how to configure out solution to match your system</p>
<div class="section" id="how-to-set-up-hardware">
<h2>How to set up hardware<a class="headerlink" href="#how-to-set-up-hardware" title="Permalink to this headline">¶</a></h2>
<p>The current hardware design is limited in that it requires
minor modifications to work with different numbers of bettery
cells. In general, the BMS chip requires that for
configurations less than 6 cells, the highest cell on the
battery needs to be shorted to all the cell inputs higher
than it. There are on board jumpers to accomplish this.
Safety is maintained by shorting the cell inputs only after
passing
through a fuse.</p>
<p>todo: insert images of schematic and how to modify the board
for fewer cells</p>
</div>
<div class="section" id="spi-commands-list">
<h2>SPI Commands List<a class="headerlink" href="#spi-commands-list" title="Permalink to this headline">¶</a></h2>
<p>Here will be documentation of the spi reads/writes for controlling the bms chip</p>
<p>Here is an example from arduino.cc showing sphinx&#8217;s capability  to show code snippets with highlighting</p>
<div class="highlight-c"><div class="highlight"><pre><span class="k">const</span> <span class="kt">int</span> <span class="n">slaveSelectPin</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// set the slaveSelectPin as an output:</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">slaveSelectPin</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="c1">// initialize SPI:</span>
  <span class="n">SPI</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// go through the six channels of the digital pot:</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">channel</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">channel</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="n">channel</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// change the resistance on this channel from min to max:</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">level</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">level</span> <span class="o">&lt;</span> <span class="mi">255</span><span class="p">;</span> <span class="n">level</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">digitalPotWrite</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">level</span><span class="p">);</span>
      <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// wait a second at the top:</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
    <span class="c1">// change the resistance on this channel from max to min:</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">level</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">level</span> <span class="o">&lt;</span> <span class="mi">255</span><span class="p">;</span> <span class="n">level</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">digitalPotWrite</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="mi">255</span> <span class="o">-</span> <span class="n">level</span><span class="p">);</span>
      <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

<span class="p">}</span>

<span class="kt">void</span> <span class="nf">digitalPotWrite</span><span class="p">(</span><span class="kt">int</span> <span class="n">address</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// take the SS pin low to select the chip:</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">slaveSelectPin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
  <span class="c1">//  send in the address and value via SPI:</span>
  <span class="n">SPI</span><span class="p">.</span><span class="n">transfer</span><span class="p">(</span><span class="n">address</span><span class="p">);</span>
  <span class="n">SPI</span><span class="p">.</span><span class="n">transfer</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
  <span class="c1">// take the SS pin high to de-select the chip:</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">slaveSelectPin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Mini High Power Battery Management System Overview</a></li>
<li><a class="reference internal" href="#bms-design">BMS Design</a></li>
<li><a class="reference internal" href="#bms-configuration">BMS Configuration</a><ul>
<li><a class="reference internal" href="#how-to-set-up-hardware">How to set up hardware</a></li>
<li><a class="reference internal" href="#spi-commands-list">SPI Commands List</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to test&#8217;s documentation!</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/includeme.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="index.html" title="Welcome to test’s documentation!"
             >previous</a> |</li>
        <li><a href="index.html">test 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, Mike.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>